storage:
  postgres:
    postgres_db:
      hostname:
        env: CFA_DG_PG_HOSTNAME
      username:
        env: CFA_DG_PG_USERNAME
      password:
        env: CFA_DG_PG_PASSWORD
      db_name:
        env: DAGSTER_USER
      port: 5432

compute_logs:
  module: dagster_azure.blob.compute_log_manager
  class: AzureBlobComputeLogManager
  config:
    storage_account: cfadagsterdev
    container: cfadagsterdev
    default_azure_credential:
    prefix: "log-files"
    local_dir: "/tmp/dagster-logs"
    upload_interval: 30
    show_url_only: false

run_coordinator:
  module: cfa_dagster
  class: CFAQueuedRunCoordinator
  config:
    dequeue_use_threads: true
    dequeue_num_workers: 4

run_launcher:
  module: cfa_dagster
  class: DynamicRunLauncher

run_monitoring:
  enabled: true
  max_resume_run_attempts: 1

concurrency:
  default_op_concurrency_limit: 1000
  runs:
    max_concurrent_runs: 1000
    tag_concurrency_limits:
    - key: concurrency
      value: single
      limit: 1
    - key: cfa_dagster/target
      value:
        applyLimitPerUniqueValue: true
      limit: 1
    - key: docker/container_id
      limit: 5

backfills:
  use_threads: true
  num_workers: 4
  num_submit_workers: 4
